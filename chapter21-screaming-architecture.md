# 소리치는 아키텍처

_건물의 청사진을 살펴본다고 상상해보자._

_계획서가 한 가족이 거주할 주택을 그리고 있다면, 정문, 거실, 현관, 그리고 식당을 볼 수 있을 것이다. 그리고 이 아키텍처는 "집이야" 라고 소리칠 것이다._ 

_도서관의 아키텍처를 보고 있다면 독서공간, 책장 등이 나타날 것이다. 그리고 "도서관이야"라고 소리칠 것이다. 이 아키텍처는 "도서관이야"라고 소리칠 것이다._

_만일 애플리케이션의 아키텍처를 보고 있다고 생각해보자. 상위 수준의 디렉터리 구조, 최상위 패키지에 담긴 소스 파일을 볼 때, 이 아키텍처는 "헬스 케어 시스템이야" 또는 "재고 관리 시스템이야" 라고 소리치는가? 아니면 "스프링이야", 혹은 "ASP이야" 라고 소리치는가?_

## 아키텍처의 테마

_Object Oriented Software Engineering_ 의 저자 _이바 야콥슨_ 은 **소프트웨어 아키텍처는 시스템의 유스케이스를 지원하는 구조**라고 지적했다. 주택이나 도서관의 계획서가 해당 건축물의 유스케이스에 대해 소리치는 것처럼, 소프트웨어 애플리케이션의 아키텍처도 애플리케이션의 유스케이스에 대해 소리쳐야 한다.

**아키텍처는 프레임워크에 대한 것이아니다.** 프레임워크로 부터 제공받아서도 절대 안 된다. 아키텍처를 프레임워크 중심으로 만들면 유스케이스가 중심이 되는 아키텍처는 나올 수 없다.

## 아키텍처의 목적

**좋은 아키텍처는 유스케이스를 그 중심에 두기 때문에, 프레임워크나 도구, 환경에 전혀 구애받지 않고 유스케이스를 지원하는 구조를 기술**할 수 있다.

주택에 대한 계획서를 다시 생각해보자. 아키텍트가 주목하는 첫번째 관심사는 주택이 거주하기 적합한 공간임을 확인하는 것이지, 벽돌로 지어졌는지 확인하는 것이 아니다. 

좋은 소프트웨어 아키텍처는 프레임워크, DB, 웹 서버 등 개발 환경 문제나 도구에 대해서는 결정을 미룰 수 있도록 만든다. 프레임 워크는 열어 둬야 할 선택사항이다. 

좋은 아키텍처는 유스케이스에 중점을 두며, 지엽적인 관심사에 대한 결합을 분리시킨다.

## 하지만 웹은?

웹은 아키텍처일까? 시스템이 웹을 통해 전달된다는 사실이 아키텍처에 영향을 주는가?

아니다. 웹은 입출력 장치이며, 애플리케이션 아키텍처에서도 그와 같이 다뤄야 한다. 애플리케이션이 웹을 통해 전달되는 것은 애플리케이션의 세부적인 구현사항이지, 전반적인 구조를 지배할 수는 없다.

시스템 아키텍처는 시스템이 어떻게 전달되는지에 대해 가능하다면 아무것도 몰라야한다.

## 프레임워크는 도구일 뿐, 삶의 방식은 아니다

프레임워크 신봉자들은 프레임워크가 모든 것을 아우를 수 있고, 어디에나 스며드는, "프레임워크가 모든 것을 하게 하자"라는 태도를 취한다.

하지만 이는 우리가 취하고 싶은 태도가 아니다. **어떻게 하면 아키텍처를 유스케이스에 중점을 둔 채 그대로 보존할 수 있을지를 생각하라**. 프레임워크가 아키텍처의 중심을 차지하는 일을 막을 수 있는 전략을 개발하라.

## 테스트하기 쉬운 아키텍처

아키텍처가 유스케이스를 중심으로 두고, 프레임워크와는 적당한 거리를 둔다면, 프레임워크를 준비하지않더라도 유스케이스에 대한 단위 테스트가 가능해야한다. 혹은 웹 서버가 필요하거나, 데이터베이스가 연결되어있어야 테스트가 가능한 상황이 되어도 안된다.

최종적으로, 프레임워크로 인한 어려움을 겪지 않고도 반드시 이 모두를 있는 그대로 테스트할 수 있어야 한다.

## 결론

**아키텍처는 시스템을 이야기해야하며, 시스템에 적용한 프레임워크에 대해 이야기해서는 안된다.**

당신이 헬스 케어 애플리케이션을 구축하고 있고, 누군가 당신의 소스 저장소를 봤을 때 첫 인상은 "오, 헬스 케어 시스템이군"이어야만 한다.